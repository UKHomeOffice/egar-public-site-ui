<div>
    <div class="govuk-form-group {{ m.form_group_class('responsibleGivenName', errors) }}">
        <label class="govuk-label govuk-label--m" for="responsibleGivenName">{{ __('field_given_name') }}</label>
        {{ m.hint('firstName', __('field_given_name_hint')) }}
        {{ m.error_message('responsibleGivenName', errors, __) }}
        <input class="govuk-input govuk-input--width-30"
              id="responsibleGivenName" name="responsibleGivenName"  type="text" maxlength="{{ MAX_STRING_LENGTH }}"
              value="{{ responsiblePerson.responsibleGivenName }}"
              {{ 'aria-describedby=responsibleGivenName-error' if errors | containsError('responsibleGivenName') }}>
        {{ m.character_count_hint('responsibleGivenName', MAX_STRING_LENGTH) }}
    </div>

    <div class="govuk-form-group {{ m.form_group_class('responsibleSurname', errors) }}">
        <label class="govuk-label govuk-label--m" for="responsibleSurname">{{ __('field_surname') }}</label>
        {{ m.error_message('responsibleSurname', errors, __) }}
        <input class="govuk-input govuk-input--width-30"
              id="responsibleSurname" name="responsibleSurname" type="text" maxlength="{{ MAX_STRING_LENGTH }}"
              value="{{ responsiblePerson.responsibleSurname }}"
              {{ 'aria-describedby=responsibleSurname-error' if errors | containsError('responsibleSurname') }}>
        {{ m.character_count_hint('responsibleSurname', MAX_STRING_LENGTH) }}
    </div>

    <div class="govuk-form-group govuk-!-margin-bottom-6 {{ m.form_group_class('responsibleContactNo', errors) }}">
        <label class="govuk-label govuk-label--m" for="responsibleContactNo">{{ __('field_contact_number') }}</label>
        <span id="responsibleContactNo-hint" class="govuk-hint">{{ __('field_contact_number_hint') }}</span>
        {{ m.error_message('responsibleContactNo', errors, __) }}
        <input class="govuk-input govuk-input--width-20"
              id="responsibleContactNo" name="responsibleContactNo" type="text"
              value="{{ responsiblePerson.responsibleContactNo }}"
              aria-describedby="responsibleContactNo-hint{{ ' responsibleContactNo-error' if errors | containsError('responsibleContactNo') }}">
    </div>

    <div class="govuk-form-group govuk-!-margin-bottom-6">
        <label class="govuk-label govuk-label--m" for="responsibleEmail">{{ __('field_email') }}</label>
        <span id="responsibleEmail-hint" class="govuk-hint">{{ __('responsible_email_hint') }}</span>

        {{ m.error_message('responsibleEmail', errors, __) }}

        <input class="govuk-input govuk-input--width-20"
              id="responsibleEmail" name="responsibleEmail" type="email"
              value="{{ responsiblePerson.responsibleEmail }}"
              aria-describedby="responsibleEmail-hint{{ 'responsibleEmail-error' if errors | containsError('responsibleEmail') }}"
              maxlength="{{ MAX_EMAIL_LENGTH }}">
    </div>

    <fieldset class="govuk-fieldset govuk-!-margin-bottom-6">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">{{ __('field_address') }}</legend>

        <div class="govuk-form-group {{ m.form_group_class('responsibleAddressLine1', errors) }}">
            <label class="govuk-label" for="responsibleAddressLine1">{{ __('field_house_number') }}
                <span class="govuk-visually-hidden">{{ __('field_line_1_of_2') }}</span></label>
            {{ m.error_message('responsibleAddressLine1', errors, __) }}
            <input class="govuk-input"
                id="responsibleAddressLine1" name="responsibleAddressLine1" type="text"
                value="{{ responsiblePerson.responsibleAddressLine1 }}"
                maxlength="{{ MAX_STRING_LENGTH }}"
                {{ 'aria-describedby=responsibleAddressLine1-error' if errors | containsError('responsibleAddressLine1') }}>
            {{ m.character_count_hint('responsibleAddressLine1', MAX_STRING_LENGTH) }}
        </div>

        <div class="govuk-form-group {{ m.form_group_class('responsibleAddressLine2', errors) }}">
            <label class="govuk-label" for="responsibleAddressLine2">
                <span class="govuk-visually-hidden">{{ __('field_line_2_of_2') }}</span></label>
            {{ m.error_message('responsibleAddressLine2', errors, __) }}
            <input class="govuk-input"
                id="responsibleAddressLine2" name="responsibleAddressLine2" type="text"
                value="{{ responsiblePerson.responsibleAddressLine2 }}"
                maxlength="{{ MAX_STRING_LENGTH }}"
                {{ 'aria-describedby=responsibleAddressLine2-error' if errors | containsError('responsibleAddressLine2') }}>
            {{ m.character_count_hint('responsibleAddressLine2', MAX_STRING_LENGTH) }}
        </div>

        <div class="govuk-form-group {{ m.form_group_class('responsibleTown', errors) }}">
            <label class="govuk-label" for="responsibleTown">{{ __('field_town') }}</label>
            {{ m.error_message('responsibleTown', errors, __) }}
            <input class="govuk-input"
                id="responsibleTown" name="responsibleTown" type="text"
                value="{{ responsiblePerson.responsibleTown }}"
                maxlength="{{ MAX_STRING_LENGTH }}"
                {{ 'aria-describedby=responsibleTown-error' if errors | containsError('responsibleTown') }}>
            {{ m.character_count_hint('responsibleTown', MAX_STRING_LENGTH) }}
        </div>

        <div class="govuk-form-group {{ m.form_group_class('responsiblePostcode', errors) }}">
            <label class="govuk-label" for="responsiblePostcode">{{ __('field_postcode') }}</label>

            {{ m.error_message('responsiblePostcode', errors, __) }}

            <input class="govuk-input govuk-input--width-10"
                id="responsiblePostcode" name="responsiblePostcode" type="text"
                value="{{ responsiblePerson.responsiblePostcode }}"
                maxlength="{{ MAX_POSTCODE_LENGTH }}">
        </div>

        <div class="govuk-form-group {{ m.form_group_class('responsibleCountry', errors) }}">
            <label id="responsibleCountry-label" class="govuk-label" for="responsibleCountry">{{ __('field_address_country') }}</label>
            {{ m.error_message('responsibleCountry', errors, __) }}
            <select class="govuk-select" id="responsibleCountry" name="responsibleCountry"
                value="{{ responsiblePerson.responsibleCountry }}"
                aria-labelledby="responsibleCountry-label">
                <option value=""></option>
                {% for country in nationalityList | sort(attribute = 'label') %}
                    <option value="{{ country.code }}"
                    {{ 'selected=selected' if responsiblePerson.responsibleCountry == country.code }}>{{ country.label }}</option>
                {% endfor %}
            </select>
        </div>
    </fieldset>

    {% set fixedBasedOperatorTextarea = govukTextarea({
      id: "fixedBasedOperatorAnswer",
      name: "fixedBasedOperatorAnswer",
      rows: 3,
      attributes: {
        placeholder: __("field_fbo_textarea_placeholder")
      },
      maxlength: MAX_TEXT_BOX_LENGTH - 100,
      value: responsiblePerson.fixedBasedOperatorAnswer or "",
      errorMessage: errors | filterArray('identifier', 'fixedBasedOperatorAnswer') | first | transform({'message': 'text'})
    }) %}

    {% set fixedBasedOperatorItems = [] %}

    {% for choice in fixedBasedOperatorOptions %}
      {% set item = {
        value: choice.value,
        text: choice.option,
        checked: (responsiblePerson.fixedBasedOperator | default('') == choice.value),
        conditional: (choice.value == 'Other') and { html: fixedBasedOperatorTextarea } or false
      } %}
      {% set fixedBasedOperatorItems = fixedBasedOperatorItems.concat(item) %}
    {% endfor %}

    {{ govukRadios({
      idPrefix: "fixedBasedOperator",
      name: "fixedBasedOperator",
      fieldset: {
        legend: {
          text: __("field_fbo_question"),
          classes: "govuk-fieldset__legend--m"
        }
      },
      classes: m.form_group_class('fixedBasedOperator', errors),
      errorMessage: errors | filterArray('identifier', 'fixedBasedOperator') | first | transform({'message': 'text'}),
      items: fixedBasedOperatorItems
    }) }}
</div>
