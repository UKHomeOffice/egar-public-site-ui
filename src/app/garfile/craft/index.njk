{% extends "base-template.njk" %}

{% import "common/templates/includes/macros.njk" as m %}

{% block pageTitle %}
	Create GAR | Arrival
{% endblock %}

{% block header %}
{% include "header-user.njk" %}
{% endblock %}

{% block beforeContent %}

  {% include "phase.njk" %}
  {% include "common/templates/includes/back.njk" %}

{% endblock %}

{% block content %}

  {% import "common/templates/includes/macros.njk" as m %}

  {% if errors %}
    {% include "common/templates/includes/errors.njk" %}
  {% endif %}

<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">

    <span class="govuk-caption-xl">Section 3 of 8</span>

    <h1 class="govuk-heading-xl">
        Aircraft Details
    </h1>

    <form action="/garfile/craft" autocomplete="false" class="form-group"
      method="post" role="form">

    <h2 class="govuk-heading-l">Saved Aircraft </h2>
    <details class="govuk-details">
      <summary class="govuk-details__summary">
        <span class="govuk-details__summary-text">
        Add the details of an Aircraft you have saved previously
        </span>
      </summary>
      <div class="govuk-details__text">

        <div id="SavedCraft">
            <table class="govuk-table">
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                    <th class="govuk-table__header" scope="col">Aircraft Registration</th>
                    <th class="govuk-table__header" scope="col">Aircraft Type</th>
                    <th class="govuk-table__header" scope="col">Aircraft Home Aerodrome/Usual Base</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
              {% for craft in cookie.getSavedCraft().items %}
              <tr class="govuk-table__row">
                <td class="govuk-table__cell ">{{ craft.registration }} </td>
                <td class="govuk-table__cell ">{{ craft.craftType }}</td>
                <td class="govuk-table__cell ">{{ craft.craftBase }}</td>
                <td class="govuk-table__cell "><button class="link btn-link" name="addCraft" value="{{craft.craftId}}">Add To Gar</button></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </details>
      <br>

      <div class="govuk-form-group {{ m.form_group_class('newCraft', errors) }}">
          <div class="govuk-form-group {{ m.form_group_class('craftReg', errors) }}">
            <h2 class="govuk-heading-l">New Aircraft</h2>
              <p class="govuk-body-m">Add the details of an Aircraft that you do not already have saved</p>
              <label class="govuk-label" for="craftReg">
              {{ m.error_message('craftReg', errors) }}
              <span class="govuk-hint">
                For example, G-ABCD
              </span>
              <span class="field-validation-valid error-message" data-valmsg-for="craftReg"
                data-valmsg-replace="true" style="display:block">
              </span>
              <input class="govuk-input"
                id="craftReg" name="craftReg" style="width:100%" type="text"
                value="{{cookie.getGarCraft().registration}}" />
        </div>

          <div class="govuk-form-group {{ m.form_group_class('craftType', errors) }}">
            <label class="govuk-label" for="craftType">
              Aircraft Type
            </label>
            {{ m.error_message('craftType', errors) }}
            <span class="govuk-hint">
              For example, Gulfstream
            </span>
            <span class="field-validation-valid error-message" data-valmsg-for="craftType"
              data-valmsg-replace="true" style="display:block">
            </span>
            <input class="govuk-input"
              id="craftType" name="craftType" style="width:100%" type="text"
              value="{{cookie.getGarCraft().craftType}}" />
          </div>

          <div class="govuk-form-group {{ m.form_group_class('craftBase', errors) }}">
          <label class="govuk-label" for="craftBase">
            Home / Usual Base
          </label>
          {{ m.error_message('craftBase', errors) }}
          <span class="govuk-hint">
            IATA/ICAO/Coordinates (Decimal)
          </span>
          <span class="field-validation-valid error-message" data-valmsg-for="craftBase"
            data-valmsg-replace="true" style="display:block">
          </span>
          <input class="govuk-input"
            id="craftBase" name="craftBase" style="width:100%" type="text"
            value="{{cookie.getGarCraft().craftBase}}" />
          </div>

        <div class="govuk-form-group">
          <input id="newCraft" class="govuk-button" type="submit" name="buttonClicked" value="Save and Continue"
          onclick="sendAnalytics(event, 'Add craft to GAR - submit', 'click')">
        </div>
				<p class="govuk-body-m">
				  <a href="#" onclick="document.forms[0].submit();return false;"name="submit_button">Save and Exit</a>
				</p>
        <p class="govuk-body-m">
          <a href="/home" > Exit without saving </a>
        </p>
         <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
    </form>

  </div>
  </div>
  </div>
{% endblock %}
