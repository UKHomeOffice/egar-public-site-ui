{% extends "base-template.njk" %}

{% import "common/templates/includes/macros.njk" as m %}

{% block pageTitle %}
	Create GAR | Arrival | Submit a General Aviation Report (GAR)
{% endblock %}

{% block header %}
{% include "header-user.njk" %}
{% endblock %}

{% block beforeContent %}

  {% include "phase.njk" %}
  <a href="/garfile/departure" class="govuk-back-link">Back</a>

{% endblock %}

{% block content %}


  {% import "common/templates/includes/macros.njk" as m %}

  {% if errors %}
    {% include "common/templates/includes/errors.njk" %}
  {% endif %}
  <div class="govuk-grid-row">
	  <div class="govuk-grid-column-two-thirds">
      <form action="/garfile/arrival" autocomplete="false" class="form-group" method="post" role="form">

        <!–– Start Arrival date -->
          <div class="govuk-form-group" id="arrivalDate">
          <span class="govuk-caption-xl">Section 2 of 8</span>
          <h1 class="govuk-heading-xl">Arrival details</h1>
          <p class="govuk-body-l">Provide the arrival details of the flight</p>
          <div class="{{ m.form_group_class('arrivalDate', errors) }}">
            <fieldset class="govuk-fieldset" aria-describedby="arrivalDate-hint" role="group">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
              Arrival date
            </legend>
            <span id="arrivalDate-hint" class="govuk-hint">
              For example 20 04 2019
            </span>
            {{ m.error_message('arrivalDate', errors) }}
            <div class="govuk-date-input" id="arrival">
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="arrivalDay">
                    Day
                  </label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="arrivalDay" name="arrivalDay" type="number" pattern="[0-9]*" value="{{cookie.dateSlice('day', cookie.getGarArrivalVoyage().arrivalDate)}}">
                </div>
              </div>

              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="arrivalMonth">
                    Month
                  </label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="arrivalMonth" name="arrivalMonth" type="number" pattern="[0-9]*" value="{{cookie.dateSlice('month', cookie.getGarArrivalVoyage().arrivalDate)}}">
                  </div>
                </div>

              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                    <label class="govuk-label govuk-date-input__label" for="arrivalYear">
                      Year
                    </label>
                    <input class="govuk-input govuk-date-input__input govuk-input--width-4" id="arrivalYear" name="arrivalYear" type="number" pattern="[0-9]*" value="{{cookie.dateSlice('year', cookie.getGarArrivalVoyage().arrivalDate)}}">
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
        <!-- End arrival date -->

        <!-- Start arrival time -->
        <div class="govuk-form-group {{ m.form_group_class('arrivalTime', errors) }}" id="arrivalTime">
          <fieldset class="govuk-fieldset" aria-describedby="arrivalTime-hint" role="group">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
              Arrival time (UTC)
            </legend>
            <span id="arrivalTime-hint" class="govuk-hint">
                For example 17 30
            </span>
            {{ m.error_message('arrivalTime', errors) }}

            <div class="govuk-date-input" id="arrivalTime">
              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="arrivalHour">
                    Hour
                  </label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="arrivalHour" name="arrivalHour" type="number" pattern="[0-9]*" value="{{cookie.timeSlice('hour', cookie.getGarArrivalVoyage().arrivalTime)}}">
                </div>
              </div>

              <div class="govuk-date-input__item">
                <div class="govuk-form-group">
                  <label class="govuk-label govuk-date-input__label" for="arrivalMinute">
                      Minute
                  </label>
                  <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="arrivalMinute" name="arrivalMinute" type="number" pattern="[0-9]*" value="{{cookie.timeSlice('minute', cookie.getGarArrivalVoyage().arrivalTime)}}">
                </div>
              </div>
            </div>
          </fieldset>
        </div>
        <!-- End arrival time -->

        <!-- Start arrival port -->
        <div class="govuk-form-group {{ m.form_group_class('arrivalPort', errors) }}">
				<label class="govuk-label govuk-label--m" for="arrivalPort">
					Arrival port
				</label>
				<span id="arrivalPort-hint" class="govuk-hint">
				Provide the IATA or ICAO code for the port. If the port does not have a code, enter 'ZZZZ'. <br>
        The arrival port must be different to the departure port.
				</span>

          {{ m.error_message('arrivalPort', errors) }}
          <input class="govuk-input" maxlength="4" id="arrivalPort" name="arrivalPort" autocomplete="false" type="text" value="{{cookie.getGarArrivalVoyage().arrivalPort}}"/>
        </div>
        <!-- End arrival port -->


        <div class="govuk-form-group">
          <label class="govuk-heading-m">Arrival coordinates</label>
          <span id="arrivalCoordinates-hint" class="govuk-hint">
          You are only required to enter coordinates if your port does not have an IATA/ICAO code.
          Provide coordinates in decimal format to 4 decimal places.
          </span>
        </div>

         <!-- Start arrival coords -->
        <div class="govuk-form-group {{ m.form_group_class('arrivalLat', errors) }}">
          <label class="govuk-label" for="arrivalLat">
            Latitude
          </label>
          <span id="arrivalLattitude-hint" class="govuk-hint">
              For example 51.4700
          </span>

          {{ m.error_message('arrivalLat', errors) }}
          <input class="govuk-input" id="arrivalLat" name="arrivalLat" autocomplete="false" type="text" value="{{cookie.getGarArrivalVoyage().arrivalLat}}"/>
        </div>

        <div class="govuk-form-group {{ m.form_group_class('arrivalLong', errors) }}">
          <label class="govuk-label" for="arrivalLong">
            Longitude
          </label>
          <span id="arrivalLongitude-hint" class="govuk-hint">
                For example -0.4542
          </span>
          {{ m.error_message('arrivalLong', errors) }}
          <input class="govuk-input" id="arrivalLong" name="arrivalLong" autocomplete="false" type="text" value="{{cookie.getGarArrivalVoyage().arrivalLong}}"/>

        </div>
        <!-- End arrival coords -->

        <!-- start buttons -->
        <div class="column-two-thirds">

                <input id="newVoyage" class="govuk-button" type="submit" name="buttonClicked" value="Save and continue"
                onclick="sendAnalytics(event, 'Add craft to GAR - submit', 'click')">

						<p class="govuk-body-m">
		          <a href="#" onclick="document.forms[0].submit();return false;"name="submit_button">Save and come back later</a>
		        </p>
            <p class="govuk-body-m">
              <a href="/home" > Exit without saving </a>
            </p>
        </div>
        <!-- end buttons -->
        <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
    </form>
  </div>
</div>
{% endblock %}
