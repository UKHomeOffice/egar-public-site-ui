{% extends "base-template.njk" %}

{% from "radios/macro.njk" import govukRadios %}

{% import "common/templates/includes/macros.njk" as m %}

{% block pageTitle %}
	Create GAR | Customs
{% endblock %}

{% block header %}
  {% include "header-user.njk" %}
{% endblock %}

{% block beforeContent %}

  {% include "phase.njk" %}
  <a href="/garfile/responsibleperson" class="govuk-back-link">{{__('nav_back')}}</a>

{% endblock %}

{% block content %}

  {% import "common/templates/includes/macros.njk" as m %}

<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">
    {% if errors %}
      {% include "common/templates/includes/errors.njk" %}
    {% endif %}

    <form action="/garfile/customs" autocomplete="off" class="form-group"
    method="post" role="form">

      <legend class="govuk-fieldset__legend govuk-fieldset__legend--xl">
        <span class="govuk-caption-xl">{{__('section_count', 6, 8)}}</span>
        <h1 class="govuk-heading-xl">{{__('heading_customs')}}</h1>
      </legend>
      <p class="govuk-body-l">{{__('caption_customs')}}</p>

      <div class="govuk-form-group {{ m.form_group_class('prohibitedGoods', errors) }}" id="prohibitedGoods">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">{{__('field_prohibited_goods_question')}}</h2>
            <span id="customs-hint" class="govuk-hint">{{__('field_prohibited_goods_hint')}}</span>
          </legend>

          <div class="govuk-radios govuk-radio--conditional" data-module="radios">
          {% for choice in prohibitedGoodsOptions %}
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="{{choice.option}}" type="radio" name="prohibitedGoods" value="{{choice.value}}"
              {{ "data-aria-controls=conditional-goodsDeclaration" if choice.value === 'Yes' }}
              {{ "checked" if choice.value == gar.prohibitedGoods }}>
              <label class="govuk-label govuk-radios__label" for="{{choice.option}}">{{choice.option}}</label>
            </div>
            {% if choice.value == 'Yes' %}
            <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-goodsDeclaration">
              <div class="govuk-form-group">
                <label class="govuk-label" for="goodsDeclaration">{{__('field_goods_declaration_label')}}</label>
                <textarea class="govuk-textarea" id="goodsDeclaration" name="goodsDeclaration"
                rows="5" aria-describedby="goods-declaration-hint"
                maxlength="{{ MAX_TEXT_BOX_LENGTH }}">{{gar.goodsDeclaration}}</textarea>
              </div>
            </div>
            {% endif %}
          {% endfor %}
          </div>
        </fieldset>
      </div>

      <div class="govuk-form-group {{ m.form_group_class('freeCirculation', errors) }}" id="freeCirculation">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">{{__('field_free_circulation')}}</h2>
            <span id="free-circulation-hint" class="govuk-hint">{{__('field_free_circulation_hint')}}</span>
          </legend>
          <div class="govuk-radios">
          {% for choice in freeCirculationOptions %}
          <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="{{choice.option}}" type="radio" name="freeCirculation" value="{{choice.value}}"
              {{ "checked" if choice.value == gar.freeCirculation }}>
            <label class="govuk-label govuk-radios__label" for="{{choice.option}}">{{choice.value}}</label>
          </div>
          {% endfor %}
          </div>
        </fieldset>
      </div>

      <div class="govuk-form-group {{ m.form_group_class('visitReason', errors) }}" id="visitReason">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">{{__('field_visit_reason_question')}}</h2>
            <span id="free-circulation-hint" class="govuk-hint">{{__('field_visit_reason_hint')}}</span>
          </legend>
          <div class="govuk-radios">
          {% for choice in reasonForVisitOptions %}
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="{{choice.option}}" type="radio" name="visitReason" value="{{choice.value}}"
            {{ "checked" if choice.value == gar.visitReason }}>
            <label class="govuk-label govuk-radios__label" for="{{choice.option}}">{{choice.option}}</label>
          </div>
          {% endfor %}
          </div>
        </fieldset>
      </div>

      <div class="govuk-form-group">
        <input id="prohibited-goods-btn" class="govuk-button" type="submit" name="buttonClicked" value="Save and continue"
        onclick="sendAnalytics(event, 'Signify whether prohibited goods - submit', 'click')">

        <p class="govuk-body-m">
          <a href="#" onclick="document.forms[0].submit();return false;"name="submit_button">{{__('form_save_and_exit')}}</a>
        </p>

        <p class="govuk-body-m">
          <a href="/home">{{__('form_exit_without_saving')}}</a>
        </p>
      </div>
      <input type="hidden" name="_csrf" value="{{ csrfToken }}" />

    </form>
    </div>
  </div>

{% endblock %}
