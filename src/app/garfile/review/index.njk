{% extends "base-template.njk" %}

{% import "common/templates/includes/macros.njk" as m %}

{% block pageTitle %}
	Create GAR | Review
{% endblock %}

{% block header %}
{% include "header-user.njk" %}
{% endblock %}

{% block beforeContent %}

  {% include "phase.njk" %}
  {% include "common/templates/includes/back.njk" %}

{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <span class="govuk-caption-xl">Section 8 of 8</span>
    <h1 class="govuk-heading-xl">Check all the information you provided before submitting your GAR</h1>

	  {% if error %}
	 	  <div class="govuk-error-summary" role="alert" aria-labelledby="error-summary-heading" tabindex="-1">
			  <h2 class="govuk-error-summary__title" id="error-summary-heading">
				  There's a problem
			  </h2>
        {% for err in error.message %}
				  <span><p class="govuk-body-m">{{err}}</p></span><br>
        {% endfor %}
	      </div>
  	{% endif %}

    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 200px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Aircraft details
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/craft">
            Change<span class="govuk-visually-hidden">Aircraft</span>
          </a>
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short">
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Aircraft Registration
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.registration}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Aircraft Type
        </dt>
         <dd class="app-check-your-answers__answer">
          {{garfile.craftType}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Home / Usual Base
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.craftBase}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 200px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Departure details
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/departure">
            Change<span class="govuk-visually-hidden">Departure</span>
          </a>
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short">
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Departure date
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.departureDate}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Departure time (UTC)
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.departureTime}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Departure port
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.departurePort}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Departure port coordinates
        </dt>
        <dd class="app-check-your-answers__answer">
          Lat: {{garfile.departureLat}} <br>
          Long: {{garfile.departureLong}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 200px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Arrival details
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/arrival">
            Change<span class="govuk-visually-hidden">Arrival</span>
          </a>
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short">
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Arrival date
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.arrivalDate}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Arrival time (UTC)
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.arrivalTime}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Arrival port
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.arrivalPort}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Arrival port coordinates
        </dt>
        <dd class="app-check-your-answers__answer">
          Lat: {{garfile.departureLat}} <br>
          Long: {{garfile.departureLong}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 200px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Manifest details
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/manifest">
            Change<span class="govuk-visually-hidden">Manifest</span>
          </a>
        </dd>
      </div>
    </dl>

    <table class="govuk-table">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th class="govuk-table__header" scope="col">Surname</th>
          <th class="govuk-table__header" scope="col">Given name</th>
          <th class="govuk-table__header" scope="col">Date of birth</th>
          <th class="govuk-table__header" scope="col">Travel document number</th>
          <th class="govuk-table__header" scope="col">Nationality</th>
          <th class="govuk-table__header" scope="col">Type</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        {% for person in garpeople.items%}
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">{{person.lastName}}</td>
          <td class="govuk-table__cell">{{person.firstName}}</td>
          <td class="govuk-table__cell">{{person.dateOfBirth}}</td>
          <td class="govuk-table__cell">{{person.documentNumber}}</td>
          <td class="govuk-table__cell">{{person.nationality}}</td>
          <td class="govuk-table__cell">{{person.peopleType.name}}</td>
        </tr>
        <tr class="govuk-table__row">
          <td class="govuk-table__cell" colspan="6">
            <div>
              <details role="group">
                <summary role="button" aria-controls="details-content-2" aria-expanded="false" title="Further information for {{person.firstName}} {{person.lastName}}">
                  <span class="summary btn-link">Further information</span>
                </summary>
                  <div class="panel panel-border-narrow" id="details-content-2" aria-hidden="true">
                    <table class="govuk-table" width="100%">
                      <tbody class="govuk-table__body">
                        <tr class="govuk-table__row">
                          <td class="govuk-table__cell">Gender</td>
                          <td class="govuk-table__cell">{{person.gender}}</td>
                        </tr>
                        <tr class="govuk-table__row">
                          <td class="govuk-table__cell">Place of birth</td>
                          <td class="govuk-table__cell">{{person.placeOfBirth}}</td>
                        </tr>
                        <tr class="govuk-table__row">
                          <td class="govuk-table__cell">Travel document type</td>
                          <td class="govuk-table__cell">{{person.documentType}}</td>
                        </tr>
                        <tr class="govuk-table__row">
                          <td class="govuk-table__cell">Travel document issuing state</td>
                          <td class="govuk-table__cell">{{person.issuingState}}</td>
                        </tr>
                        <tr class="govuk-table__row">
                          <td class="govuk-table__cell">Travel document expiry date</td>
                          <td class="govuk-table__cell">{{person.documentExpiryDate}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
              </details>
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 500px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Responsible person's details
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/responsibleperson">
            Change<span class="govuk-visually-hidden">Responsible Person</span>
          </a>
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short">
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Given name
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.responsibleGivenName}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Surname
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.responsibleSurname}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Address
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.responsibleAddressLine1}} <br>
          {{garfile.responsibleAddressLine1}} <br>
          {{garfile.responsibleCounty}} <br>
          {{garfile.responsiblePostcode}} <br>
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Contact details
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.responsibleContactNo}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 200px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Customs
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/customs">
            Change<span class="govuk-visually-hidden">Customs</span>
          </a>
        </dd>
      </div>
    </dl>

    <dl class="app-check-your-answers app-check-your-answers--short">
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Prohibited goods
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.prohibitedGoods}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Intentions declared
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.intentionsDeclared}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Is the Aircraft in free circultion in the EU?
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.freeCirculation}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
      <div class="app-check-your-answers__contents">
        <dt class="app-check-your-answers__question">
          Reason for visit
        </dt>
        <dd class="app-check-your-answers__answer">
          {{garfile.visitReason}}
        </dd>
        <dd class="app-check-your-answers__change">
        </dd>
      </div>
    </dl>


    <dl class="app-check-your-answers app-check-your-answers--short" style="margin-bottom: 0;">
      <div class="app-check-your-answers__contents">
        <dt style="width: 400px; border-bottom: none;" class="govuk-heading-m app-check-your-answers__question">
          Supporting documentation details
        </dt>
        <dd style="border-bottom: none;" class="app-check-your-answers__change">
          <a href="/garfile/supportingdocuments">
            Change<span class="govuk-visually-hidden">Supporting Documents</span>
          </a>
        </dd>
      </div>
    </dl>

		<table class="govuk-table">
			<thead class="govuk-table__head">
				<tr class="govuk-table__row">
					<th class="govuk-table__header" scope="col">File name</th>
					<th class="govuk-table__header" scope="col">File size</th>
					<th class="govuk-table__header" scope="col">Status</th>
				</tr>
			</thead>
			<tbody class="govuk-table__body">
        {% for file in supportingdocs.items %}
				<tr class="govuk-table__row">
					<td class="govuk-table__cell">{{file.fileName}}</td>
					<td class="govuk-table__cell">{{file.size}}</td>
					<td class="govuk-table__cell">Done</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>


  <form action="/garfile/review" method="post" class="form">
    <h2 class="govuk-heading-m">Now submit the GAR</h2>

    <p class="govuk-body-m">
      By submitting this General Aviation Report you are confirming that,
      to the best of your knowledge, the information you are providing is correct,
      and that you have the explicit permission of the persons named in this report to submit information on their behalf.
    </p>

    <div class="form-group">
      <input type="submit" class="govuk-button" value="Accept and submit">
    </div>
        <input type="hidden" name="_csrf" value="{{ csrfToken }}" />
  </form>
  </div>
</div>
{% endblock %}
